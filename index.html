<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Exame Online</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: Arial, sans-serif; overflow: hidden; background-color: #f0f0f0; }

.abas { display: flex; height: 100vh; flex-direction: column; }
.menu-abas { display: flex; background-color: #1a73e8; }

.aba-botao {
  flex: 1;
  padding: 15px;
  background-color: #1557b0;
  color: white;
  border: none;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  transition: background-color 0.3s;
}
.aba-botao.ativa-aba { background-color: #1a73e8; }
.aba-botao:hover:not(.desabilitada) { background-color: #1670d8; }
.aba-botao.desabilitada { opacity: 0.5; cursor: not-allowed; }

.conteudo-aba { flex: 1; display: none; }
.conteudo-aba.ativa-aba { display: block; }

.aviso-meet {
  padding: 30px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  text-align: center;
  min-height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.aviso-meet h2 { margin-bottom: 20px; font-size: 28px; }
.aviso-meet p { margin-bottom: 15px; font-size: 16px; max-width: 600px; line-height: 1.6; }

.botao {
  display: inline-block;
  margin-top: 12px;
  padding: 14px 34px;
  background-color: white;
  color: #667eea;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  font-size: 16px;
  transition: all 0.18s;
  box-shadow: 0 3px 10px rgba(0,0,0,0.12);
  cursor: pointer;
}
.botao:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,0,0,0.18); }
.botao.desabilitado { opacity: 0.55; cursor: not-allowed; }

.botao-forms { color: #34a853; display: none; }
.botao-forms.visivel { display: inline-block; }

.instrucoes { margin-top: 22px; padding: 18px; background-color: rgba(255,255,255,0.08); border-radius: 10px; max-width: 520px; }
.instrucoes ul { text-align: left; list-style-position: inside; }
.instrucoes li { margin: 8px 0; }

iframe { width: 100%; height: 100%; border: none; }
</style>
</head>
<body>
  <div class="abas">
    <div class="menu-abas">
      <button class="aba-botao ativa-aba" onclick="trocarAba('login')">üîê Login (Documento)</button>
      <button class="aba-botao desabilitada" id="abaMeetBtn" onclick="trocarAba('meet')">üìπ Google Meet</button>
      <button class="aba-botao desabilitada" id="abaProvaBtn" onclick="trocarAba('prova')">üìù Prova</button>
    </div>

    <!-- ABA LOGIN (USAR O DOC PARA FOR√áAR LOGIN) -->
    <div class="conteudo-aba ativa-aba" id="aba-login">
      <div class="aviso-meet">
        <h2>üîê Primeiro: Acesso ao Google (Documento)</h2>
        <p>Para iniciar, abra o documento que far√° voc√™ autenticar na sua conta Google. Isso evita que voc√™ precise autenticar diretamente no Meet/Forms dentro do SEB.</p>
        <p><strong>Observa√ß√£o:</strong> o documento serve apenas para for√ßar o login. N√£o feche a janela do navegador enquanto for orientado pelo professor.</p>

        <button class="botao" id="btnLoginDoc" onclick="abrirDoc()">üìÑ Abrir Documento (login)</button>

        <div class="instrucoes">
          <p style="font-weight:bold; margin-bottom:10px;">‚ö†Ô∏è Passos:</p>
          <ul>
            <li id="p1" style="opacity:0.5;">Abra o documento e, se necess√°rio, fa√ßa login na sua conta Google.</li>
            <li id="p2" style="opacity:0.5;">Volte a esta p√°gina e clique em "Entrar no Google Meet".</li>
            <li id="p3" style="opacity:0.5;">Aguarde instru√ß√µes do professor no Meet e, quando liberado, clique em "Abrir Formul√°rio da Prova".</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ABA MEET -->
    <div class="conteudo-aba" id="aba-meet">
      <div class="aviso-meet" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <h2>üìπ Google Meet</h2>
        <p>Ap√≥s fazer o login atrav√©s do documento, entre no Meet para ouvir as instru√ß√µes do examinador.</p>
        <button class="botao" id="btnMeet" onclick="abrirMeet()">üé• Entrar no Google Meet</button>

        <div class="instrucoes">
          <ul>
            <li>Mantenha a c√¢mera ligada enquanto estiver na prova.</li>
            <li>N√£o compartilhe links: a prova s√≥ estar√° dispon√≠vel quando o professor liberar.</li>
            <li>Quando o examinador liberar, voc√™ dever√° atualizar o formul√°rio que abriu no passo 1.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ABA PROVA -->
    <div class="conteudo-aba" id="aba-prova">
      <div class="aviso-meet" style="background: linear-gradient(135deg, #34a853 0%, #0f9d58 100%);">
        <h2>üìù Formul√°rio da Prova</h2>
        <p>O formul√°rio ser√° aberto em nova janela. Se estiver bloqueado inicialmente, aguarde o aviso no Meet e ent√£o atualize a p√°gina do formul√°rio.</p>
        <p style="margin-top:16px; font-size:14px;">‚ö†Ô∏è N√£o feche o Meet nem esta p√°gina principal durante a prova.</p>
      </div>
    </div>
  </div>

<script>
  // Flags de controle
  let docAberto = false;
  let meetAberto = false;
  let provaIniciada = false;

  // Links (troque pelos seus se desejar)
  const DOC_LOGIN = 'https://docs.google.com/document/d/1BySZqBtpl7LH1sygDTZzAICh6l53ThRdXwyhE5mvFFE/edit?tab=t.0';
  const MEET_LINK = 'https://meet.google.com/ppj-mwvr-mbe';
  const FORM_LINK = 'https://docs.google.com/forms/d/e/1FAIpQLSc7V47uP4jvP6KR1VMRCQDJ5vi86defPL7QFbPJgW4R99LYCw/viewform';

  function abrirDoc() {
    // Abre o documento para for√ßar o login
    window.open(DOC_LOGIN, '_blank', 'width=1000,height=800');
    docAberto = true;

    // Atualiza instru√ß√µes visuais
    document.getElementById('p1').style.opacity = '1';
    // Habilita bot√£o do Meet
    document.getElementById('abaMeetBtn').classList.remove('desabilitada');
    alert('Documento aberto. Se necess√°rio, fa√ßa login na conta Google nessa nova janela. Depois volte e clique em "Entrar no Google Meet".');
  }

  function abrirMeet() {
    if (!docAberto) {
      alert('‚ö†Ô∏è Abra o documento primeiro para autenticar na sua conta Google.');
      return;
    }
    window.open(MEET_LINK, '_blank', 'width=1200,height=800');
    meetAberto = true;
    document.getElementById('p2').style.opacity = '1';

    // Ap√≥s abrir o Meet, habilita a aba/prova (para abrir o formul√°rio)
    document.getElementById('abaProvaBtn').classList.remove('desabilitada');

    // Mostra instru√ß√£o adicional
    alert('Meet aberto. Aguarde instru√ß√µes do professor. Quando ele liberar, clique em "Abrir Formul√°rio da Prova" (bot√£o "Formul√°rio").');
    // Muda para a aba do Meet
    trocarAba('meet');
  }

  function abrirForms() {
    if (!meetAberto) {
      alert('‚ö†Ô∏è Voc√™ precisa entrar no Google Meet antes de abrir o formul√°rio.');
      return;
    }
    const confirmar = confirm('Deseja abrir o formul√°rio agora? Lembre-se: se ele estiver bloqueado, aguarde o aviso no Meet e ent√£o atualize a p√°gina do formul√°rio.');
    if (!confirmar) return;

    window.open(FORM_LINK, '_blank', 'width=1000,height=800');
    provaIniciada = true;
    document.getElementById('p3').style.opacity = '1';
    trocarAba('prova');
  }

  // Fun√ß√£o para alternar abas internas
  function trocarAba(aba) {
    // Se tentar ir para a aba prova sem ter iniciado, bloqueia
    if (aba === 'prova' && !provaIniciada) {
      // Se a aba for a da prova mas o formul√°rio n√£o foi aberto, oferecemos abrir o formul√°rio (ajuste de UX)
      if (!document.getElementById('abaProvaBtn').classList.contains('desabilitada')) {
        // bot√£o formul√°rio habilitado ‚Äî podemos abrir o formul√°rio
        const abrir = confirm('Deseja abrir o formul√°rio agora?');
        if (abrir) { abrirForms(); return; }
      }
      alert('‚ö†Ô∏è Voc√™ precisa abrir o formul√°rio atrav√©s do bot√£o apropriado antes de acessar a aba "Prova".');
      return;
    }

    // Remove classes ativas
    document.querySelectorAll('.aba-botao').forEach(btn => btn.classList.remove('ativa-aba'));
    document.querySelectorAll('.conteudo-aba').forEach(c => c.classList.remove('ativa-aba'));

    // Define active
    if (aba === 'login') {
      document.querySelector('.aba-botao:nth-child(1)').classList.add('ativa-aba');
      document.getElementById('aba-login').classList.add('ativa-aba');
    } else if (aba === 'meet') {
      document.querySelector('.aba-botao:nth-child(2)').classList.add('ativa-aba');
      document.getElementById('aba-meet').classList.add('ativa-aba');
    } else if (aba === 'prova') {
      document.querySelector('.aba-botao:nth-child(3)').classList.add('ativa-aba');
      document.getElementById('aba-prova').classList.add('ativa-aba');
    }
  }

  // Bloqueios b√°sicos (n√£o garantem seguran√ßa total no SEB, mas atrapalham inspe√ß√£o casual)
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', e => {
    if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && ['I','J'].includes(e.key)) || (e.ctrlKey && e.key === 'U')) {
      e.preventDefault();
    }
  });

  // Expor fun√ß√£o abrirForms no escopo global para possibilitar uso via prompt se o usu√°rio for para a aba Prova
  window.abrirForms = abrirForms;
</script>
</body>
</html>
